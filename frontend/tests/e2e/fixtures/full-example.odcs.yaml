domain: seller
dataProduct: my quantum
version: 1.1.0
status: active
id: 53581432-6c55-4ba2-a65f-72344a91553a
authoritativeDefinitions:
  - type: canonical
    url: https://github.com/bitol-io/open-data-contract-standard/blob/main/docs/examples/all/full-example.odcs.yaml
    description: Canonical URL to the latest version of the contract.
description:
  purpose: Views built on top of the seller tables.
  limitations: Data based on seller perspective, no buyer information
  usage: Predict sales over time
  authoritativeDefinitions:
    - type: privacy-statement
      url: https://example.com/gdpr.pdf
tenant: ClimateQuantumInc
kind: DataContract
apiVersion: v3.1.0
servers:
  - server: my-postgres
    type: postgres
    host: localhost
    port: 5432
    database: pypl-edw
    schema: pp_access_views
schema:
  - id: tbl_obj
    name: tbl
    physicalName: tbl_1
    physicalType: table
    businessName: Core Payment Metrics
    description: Provides core payment metrics including transaction references and receiver information
    customProperties:
      - property: status
        value: active
      - property: business-key
        value:
          - txn_ref_dt
          - rcvr_id
    authoritativeDefinitions:
      - url: https://catalog.data.gov/dataset/air-quality
        type: businessDefinition
      - url: https://youtu.be/jbY1BKFj9ec
        type: videoTutorial
    tags:
      - finance
      - payments
    dataGranularityDescription: Aggregation on columns txn_ref_dt, pmt_txn_id
    relationships:
      - type: foreignKey
        from:
          - tbl.rcvr_id
          - tbl.rcvr_cntry_code
        to:
          - receivers.id
          - receivers.country_code
        customProperties:
          - property: description
            value: Composite key linking to receivers table
          - property: cardinality
            value: many-to-one
    properties:
      - id: txn_ref_dt_prop
        name: transaction_reference_date
        physicalName: txn_ref_dt
        primaryKey: false
        primaryKeyPosition: -1
        businessName: transaction reference date
        logicalType: date
        physicalType: date
        required: false
        unique: false
        description: Reference date for transaction
        partitioned: true
        partitionKeyPosition: 1
        clustered: false
        criticalDataElement: false
        tags: []
        classification: public
        transformSourceObjects:
          - table_name_1
          - table_name_2
          - table_name_3
        transformLogic:
          sel t1.txn_dt as txn_ref_dt from table_name_1 as t1, table_name_2 as t2, table_name_3 as t3 where
          t1.txn_dt=date-3
        transformDescription: defines the logic in business terms; logic for dummies
        examples:
          - 2022-10-03
          - 2020-01-28
        customProperties:
          - property: anonymizationStrategy
            value: none
          - property: order
            value: 0
      - id: rcvr_id_prop
        name: rcvr_id
        primaryKey: true
        primaryKeyPosition: 1
        businessName: receiver id
        logicalType: string
        physicalType: varchar(18)
        required: true
        unique: true
        description: A description for column rcvr_id.
        partitioned: false
        partitionKeyPosition: -1
        clustered: false
        criticalDataElement: true
        tags:
          - uid
        classification: restricted
        relationships:
          - to: receivers.id
            type: foreignKey
            customProperties:
              - property: description
                value: Links to receiver master data
        customProperties:
          - property: order
            value: 1
          - property: is_foreign_key
            value: true
      - id: rcvr_cntry_code_prop
        name: rcvr_cntry_code
        primaryKey: false
        primaryKeyPosition: -1
        businessName: receiver country code
        logicalType: string
        physicalType: varchar(2)
        required: false
        unique: false
        description: Country code of the receiver in ISO 3166-1 alpha-2 format
        partitioned: false
        partitionKeyPosition: -1
        clustered: true
        criticalDataElement: false
        tags: []
        classification: public
        authoritativeDefinitions:
          - url: https://collibra.com/asset/742b358f-71a5-4ab1-bda4-dcdba9418c25
            type: businessDefinition
          - url: https://github.com/myorg/myrepo
            type: transformationImplementation
          - url: jdbc:postgresql://localhost:5432/adventureworks/tbl_1/rcvr_cntry_code
            type: implementation
        encryptedName: rcvr_cntry_code_encrypted
        quality:
          - metric: nullValues
            mustBe: 0
            description: column should not contain null values
            dimension: completeness
            type: library
            severity: error
            businessImpact: operational
            schedule: 0 20 * * *
            scheduler: cron
            customProperties:
              - property: FIELD_NAME
                value: null
              - property: COMPARE_TO
                value: null
              - property: COMPARISON_TYPE
                value: Greater than
        customProperties:
          - property: order
            value: 2
      - id: txn_amount_prop
        name: txn_amount
        primaryKey: false
        primaryKeyPosition: -1
        businessName: transaction amount
        logicalType: decimal
        physicalType: decimal(18,2)
        required: true
        unique: false
        description: The total amount of the transaction in the transaction currency
        partitioned: false
        partitionKeyPosition: -1
        clustered: false
        criticalDataElement: true
        tags:
          - amount
          - financial
        classification: confidential
        logicalTypeOptions:
          minimum: 0
          maximum: 999999999.99
          precision: 18
          scale: 2
        default: '0.00'
        customProperties:
          - property: order
            value: 3
    quality:
      - metric: rowCount
        mustBeGreaterThan: 1000000
        type: library
        description: Ensure row count is within expected volume range
        dimension: completeness
        method: reconciliation
        severity: error
        businessImpact: operational
        schedule: 0 20 * * *
        scheduler: cron
  - id: receivers_obj
    name: receivers
    physicalName: receivers_master
    physicalType: table
    businessName: Receivers Master Data
    description: Master data for all receivers with composite primary key
    customProperties:
      - property: status
        value: active
    tags:
      - master-data
      - receivers
    properties:
      - id: receiver_id_prop
        name: id
        primaryKey: true
        primaryKeyPosition: 1
        businessName: receiver identifier
        logicalType: string
        physicalType: varchar(18)
        required: true
        unique: true
        description: Unique identifier for receiver (part of composite PK)
        classification: restricted
        customProperties:
          - property: order
            value: 0
      - id: country_code_prop
        name: country_code
        primaryKey: true
        primaryKeyPosition: 2
        businessName: receiver country
        logicalType: string
        physicalType: varchar(2)
        required: true
        unique: false
        description: Country code of the receiver (part of composite PK)
        classification: public
        logicalTypeOptions:
          minLength: 2
          maxLength: 2
          pattern: ^[A-Z]{2}$
        customProperties:
          - property: order
            value: 1
      - id: receiver_name_prop
        name: receiver_name
        businessName: receiver name
        logicalType: string
        physicalType: varchar(255)
        required: true
        unique: false
        description: Full legal name of the receiver
        classification: restricted
        criticalDataElement: true
        logicalTypeOptions:
          minLength: 1
          maxLength: 255
        customProperties:
          - property: order
            value: 2
      - id: receiver_type_prop
        name: receiver_type
        businessName: receiver type
        logicalType: string
        physicalType: varchar(20)
        required: false
        unique: false
        description: Type of receiver (individual, business, etc.)
        classification: public
        quality:
          - metric: validValues
            mustBeIn:
              - individual
              - business
              - government
              - non-profit
            description: Receiver type must be one of the allowed values
            dimension: validity
            type: library
            severity: warning
        relationships:
          - to: receiver_types.type_code
            customProperties:
              - property: description
                value: Links to receiver type definitions
        customProperties:
          - property: order
            value: 3
      - id: receiver_email_prop
        name: email
        businessName: receiver email
        logicalType: string
        physicalType: varchar(255)
        required: false
        unique: true
        description: Primary email address for the receiver
        classification: pii
        criticalDataElement: true
        encryptedName: email_encrypted
        logicalTypeOptions:
          format: email
          maxLength: 255
        customProperties:
          - property: order
            value: 4
      - id: created_at_prop
        name: created_at
        businessName: creation timestamp
        logicalType: timestamp
        physicalType: timestamp with time zone
        required: true
        unique: false
        description: Timestamp when the receiver record was created
        classification: internal
        default: CURRENT_TIMESTAMP
        customProperties:
          - property: order
            value: 5
  - id: receiver_types_obj
    name: receiver_types
    physicalName: lkp_receiver_types
    physicalType: table
    businessName: Receiver Type Lookup
    description: Lookup table for valid receiver types
    customProperties:
      - property: status
        value: active
    tags:
      - lookup
      - reference-data
    properties:
      - id: type_code_prop
        name: type_code
        primaryKey: true
        primaryKeyPosition: 1
        businessName: type code
        logicalType: string
        physicalType: varchar(20)
        required: true
        unique: true
        description: Unique code for the receiver type
        classification: public
        customProperties:
          - property: order
            value: 0
      - id: type_name_prop
        name: type_name
        businessName: type name
        logicalType: string
        physicalType: varchar(100)
        required: true
        unique: false
        description: Human-readable name for the receiver type
        classification: public
        customProperties:
          - property: order
            value: 1
      - id: type_description_prop
        name: type_description
        businessName: type description
        logicalType: string
        physicalType: text
        required: false
        unique: false
        description: Detailed description of the receiver type
        classification: public
        customProperties:
          - property: order
            value: 2
  # Table with nested array/object columns (to test recursive column processing)
  - id: alerts_obj
    name: alerts
    physicalName: tbl_alerts
    physicalType: table
    businessName: Alert Records
    description: Alert data with nested structures for rules and metadata
    customProperties:
      - property: status
        value: active
    tags:
      - alerts
      - nested-data
    properties:
      - id: alert_id_prop
        name: alert_id
        primaryKey: true
        primaryKeyPosition: 1
        businessName: alert identifier
        logicalType: string
        physicalType: varchar(36)
        required: true
        unique: true
        description: Unique identifier for the alert
        customProperties:
          - property: order
            value: 0
      - id: alert_type_prop
        name: alert_type
        businessName: alert type
        logicalType: string
        physicalType: varchar(50)
        required: true
        description: Type of alert (e.g., LIABILITY, CASHOUT)
        customProperties:
          - property: order
            value: 1
      # Nested array column with items.properties
      - id: rules_triggered_prop
        name: rules_triggered
        businessName: triggered rules
        logicalType: array
        physicalType: array
        required: true
        description: Array of rules that triggered this alert
        customProperties:
          - property: order
            value: 2
        items:
          logicalType: object
          physicalType: object
          properties:
            - name: rule_id
              logicalType: string
              physicalType: varchar(36)
              required: true
              description: Unique rule identifier
            - name: rule_name
              logicalType: string
              physicalType: varchar(100)
              required: true
              description: Name of the triggered rule
            - name: priority
              logicalType: integer
              physicalType: int
              required: true
              description: Rule priority (0-30)
            - name: group_name
              logicalType: string
              physicalType: varchar(50)
              description: Group this rule belongs to
            # Deeply nested object (3 levels)
            - name: operation
              logicalType: object
              physicalType: record
              description: Automated operation triggered by this rule
              properties:
                - name: operation_name
                  logicalType: string
                  physicalType: varchar(100)
                  description: Name of the operation
                - name: operation_field
                  logicalType: string
                  physicalType: varchar(100)
                  description: Field affected by operation
                - name: revert_action
                  logicalType: string
                  physicalType: varchar(100)
                  description: Action to revert the operation
      # Nested object column with direct properties
      - id: bet_metadata_prop
        name: bet_metadata
        businessName: bet metadata
        logicalType: object
        physicalType: record
        description: Metadata about the bet associated with this alert
        customProperties:
          - property: order
            value: 3
        properties:
          - name: bet_id
            logicalType: string
            physicalType: varchar(36)
            description: Unique bet identifier
          - name: bet_amount
            logicalType: number
            physicalType: decimal(18,2)
            description: Total bet amount
          - name: customer_id
            logicalType: string
            physicalType: varchar(36)
            description: Customer who placed the bet
          - name: placement_time
            logicalType: timestamp
            physicalType: timestamp_tz
            description: When the bet was placed
      # Another nested array for selection metadata
      - id: selection_metadata_prop
        name: selection_metadata
        businessName: selection metadata
        logicalType: array
        physicalType: array
        description: Metadata for each selection in the bet
        customProperties:
          - property: order
            value: 4
        items:
          logicalType: object
          physicalType: object
          properties:
            - name: selection_id
              logicalType: string
              physicalType: varchar(36)
              description: Selection identifier
            - name: selection_name
              logicalType: string
              physicalType: varchar(255)
              description: Name of the selection
            - name: selection_price
              logicalType: number
              physicalType: decimal(10,4)
              description: Price at which selection was taken
            - name: market_id
              logicalType: string
              physicalType: varchar(36)
              description: Market identifier
            - name: event_id
              logicalType: string
              physicalType: varchar(36)
              description: Event identifier
      - id: raised_at_prop
        name: raised_at
        businessName: raised timestamp
        logicalType: timestamp
        physicalType: timestamp_tz
        required: true
        description: When the alert was raised
        customProperties:
          - property: order
            value: 5
      - id: completed_at_prop
        name: completed_at
        businessName: completed timestamp
        logicalType: timestamp
        physicalType: timestamp_tz
        required: true
        description: When the alert was completed
        customProperties:
          - property: order
            value: 6
price:
  priceAmount: 9.95
  priceCurrency: USD
  priceUnit: megabyte
team:
  name: my-team
  description: The team owning the data contract
  members:
    - username: ceastwood
      role: Data Scientist
      dateIn: 2022-08-02
      dateOut: 2022-10-01
      replacedByUsername: mhopper
    - username: mhopper
      role: Data Scientist
      dateIn: 2022-10-01
    - username: daustin
      role: Owner
      description: Keeper of the grail
      dateIn: 2022-10-01
roles:
  - role: microstrategy_user_opr
    access: read
    firstLevelApprovers: Reporting Manager
    secondLevelApprovers: mandolorian
  - role: bq_queryman_user_opr
    access: read
    firstLevelApprovers: Reporting Manager
    secondLevelApprovers: na
  - role: risk_data_access_opr
    access: read
    firstLevelApprovers: Reporting Manager
    secondLevelApprovers: dathvador
  - role: bq_unica_user_opr
    access: write
    firstLevelApprovers: Reporting Manager
    secondLevelApprovers: mickey
slaProperties:
  - property: latency
    value: 4
    unit: d
    element: tab1.txn_ref_dt
  - property: generalAvailability
    value: 2022-05-12T09:30:10-08:00
  - property: endOfSupport
    value: 2032-05-12T09:30:10-08:00
  - property: endOfLife
    value: 2042-05-12T09:30:10-08:00
  - property: retention
    value: 3
    unit: y
    element: tab1.txn_ref_dt
  - property: frequency
    value: 1
    valueExt: 1
    unit: d
    element: tab1.txn_ref_dt
  - property: timeOfAvailability
    value: 09:00-08:00
    element: tab1.txn_ref_dt
    driver: regulatory
  - property: timeOfAvailability
    value: 08:00-08:00
    element: tab1.txn_ref_dt
    driver: analytics
support:
  - channel: '#product-help'
    tool: slack
  - channel: datacontract-ann
    tool: email
    url: mailto:datacontract-ann@bitol.io
  - channel: Feedback
    description: General Product Feedback (Public)
    url: https://product-feedback.com
  - channel: product-issues
    tool: teams
    scope: issues
    customProperties:
      - property: servicehours
        value: 9-5 CET
tags:
  - transactions
customProperties:
  - property: refRulesetName
    value: gcsc.ruleset.name
  - property: somePropertyName
    value: property.value
  - property: dataprocClusterName
    value: cluster name
contractCreatedTs: 2022-11-15T02:59:43+00:00
